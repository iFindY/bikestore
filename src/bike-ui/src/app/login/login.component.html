<div class="panes" [@slide]="state.activePane">

<!-- screen 1-->
    <div class="first-screen">
        <h1 mat-dialog-title style="margin-bottom: 11px" [ngClass]="{'bold': state.activePane==='login'}" >Sign In</h1>
        <h1 mat-dialog-title style="margin-bottom: 90px" [ngClass]="{'bold': state.activePane==='register'||state.activePane==='registered'}">Sign Up</h1>

        <div class="collapse" [ngClass]="{ 'd-flex justify-content-center visible': state.activePane ==='logged-in'}">
            <img class="w-50 h-50" alt="logo" src="../../assets/images/check-circle.gif"/>
        </div>

        <div mat-dialog-content
             class="text-center position-relative overflow-hidden"
             [ngStyle]="{'visibility': state.activePane ==='logged-in'? 'hidden':'visible'}">

            <form [formGroup]="state.loginForm" (ngSubmit)="onLoginSubmit()" autocomplete="on" novalidate>


                <div class="overflow-hidden" style="height: 149px;" [@move]="state.activePane">
                    <!--email-->
                    <custom-input class="d-block"
                                  (input)="resetF($event)"
                                  type="email"
                                  label="Email"
                                  icon="account_circle"
                                  [errorMsg]="message"
                                  placeholder="Ex. peter@gmail.com"
                                  [required]="true"
                                  [tabIndex]="state.login.index"
                                  [errorState]="message==null"
                                  formControlName="email"
                                  [@registered]="{value: state.activePane, params: {top:300}}">
                    </custom-input>

                    <!--password-->
                    <custom-input class="d-block"
                                  (input)="resetF($event)"
                                  controlType="password" [@registered]="{value: state.activePane, params: {top:300}}"
                                  label="Password"
                                  icon="visibility"
                                  errorMsg="to simple"
                                  placeholder="Ex. Pa$$word!195"
                                  [hintVisible]="state.activePane=='register'"
                                  [errorVisible]="state.activePane==='register'"
                                  [required]="true"
                                  [tabIndex]="state.login.index"
                                  formControlName="password">
                    </custom-input>

                    <!--confirm password-->
                    <custom-input [@registered]="{value: state.activePane, params: {top:300}}"
                                  class="d-block"
                                  controlType="password"
                                  label="Verify Password"
                                  icon="visibility"
                                  errorMsg="not matching"
                                  placeholder="matching"
                                  [hintVisible]="state.activePane==='register' && state.loginControls['confirmPassword'].valid"
                                  [errorVisible]="state.activePane==='register'"
                                  [required]="true"
                                  [tabIndex]="state.register.index"
                                  formControlName="confirmPassword">
                    </custom-input>

                    <div style="margin-top: 12px" [@registered]="{value: state.activePane, params: {top:120}}">

                        <h2>Account Created!</h2>
                        <h4>Please check your mailbox for an activation link.</h4>

                        <img class="circle" alt="logo" src="../../assets/images/check-circle.gif"/>

                    </div>

                </div>

                <div style="text-align: right; margin-right: 40px; margin-top: -22px;">

                    <!--forgot password button -->
                    <button mat-button [ngStyle]="{'visibility':state.activePane === 'registered' ? 'collapse' : 'visible'}"
                            type="button"
                            id="smallButton"
                            class="no-hover-effect"
                            (click)="firstScreenState('reset')"
                            tabIndex="-1"
                            [disableRipple]="true">
                        forgot password ?
                    </button>
                </div>

                <div style="margin: 22px 30px 15px 30px;">

                    <!--main action button-->
                    <loading-button
                            color="primary"
                            type="submit"
                            [loading]="loading$ | async"
                            [disabled]="state.loginForm.invalid || (loading$ | async)">
                        {{state.mainButton}}
                    </loading-button>
                </div>

                <div style="margin: 5px 30px 10px 30px;" [@moveText]="state.activePane">

                    <div>{{state.help}}</div>

                    <!--switch screen button -->
                    <button mat-button
                            type="button"
                            class="no-hover-effect register"
                            [disableRipple]="true"
                            (click)="firstScreenState()"
                            tabindex="-1">
                        {{state.secondButton}}
                    </button>
                </div>

            </form>
        </div>
    </div>

    <!--screen 2-->
    <div>
        <h1 mat-dialog-title style="margin-bottom: 11px; font-weight: bold">Reset</h1>
        <h1 mat-dialog-title style="margin-bottom: 90px; font-weight: bold">Password</h1>

        <div mat-dialog-content class="text-center position-relative">


            <form [formGroup]="state.resetForm" autocomplete="on">

                <!--email & verification code-->
                <div  class="overflow-hidden" style="height: 80px;" [@moveResetDigits]="{value: state.activePane, params: {top: ANIMATION_PARAMETER}}">

                <!--reset email-->
                    <div [@showPassword]="{value: state.activePane, params: {top: 120,done:300}}">
                        <custom-input type="email"
                                      label="Reset Email"
                                      icon="account_circle"
                                      errorMsg="not a valid email"
                                      placeholder="Enter your email address to receive an reset link"
                                      [required]="true"
                                      [tabIndex]="state.reset.index"
                                      formControlName="resetEmail"></custom-input>
                    </div>

                    <!--verification code--> <!--remove cursor-->
                    <div  style="margin-top: 15px" [@showPassword]="{value: state.activePane, params: {top: 300,done:300}}">
                        <code-input [tabIndex]="state.code.index" formControlName="resetCode" (confirmed)="secondScreenState($event)"></code-input>
                    </div>


                    <div [@showPassword]="{value: state.activePane, params: {top: 120,done:300}}">
                    <!--reset and confirm password -->
                        <custom-input controlType="password"
                                      type="password"
                                      label="New Password"
                                      icon="visibility"
                                      errorMsg="to simple"
                                      placeholder="Enter new password"
                                      [required]="true"
                                      [tabIndex]="state.password.index"
                                      formControlName="resetPassword"></custom-input>

                        <custom-input controlType="password"
                                      type="password"
                                      label="Confirm Password"
                                      icon="visibility"
                                      errorMsg="not matching"
                                      placeholder="Confirm password"
                                      [required]="true"
                                      [tabIndex]="state.password.index"
                                      formControlName="confirmResetPassword"></custom-input>
                    </div>

                    <div [@showPassword]="{value: state.activePane, params: {top: 80,done:180}}">

                        <h2 >Password Changed!</h2>
                        <h4>Your password has been changed successfully.</h4>
                        <mat-icon style="width: 50px;height: 50px;font-size: 50px;color: green;margin-bottom: 8px">done</mat-icon>

                    </div>

                </div>

                <!-- button actions-->
                <div>
                    <!--main action-->
                    <div style="margin: 20px 30px 15px 30px;">
                        <loading-button
                                (submit)="secondScreenState()"
                                [tabIndex]="(state.reset.index||state.password.index)?0:-1"
                                [disabled]="state.resetForm.invalid">
                            {{state.resetButton}}
                        </loading-button>
                    </div>

                    <!-- switch screen action-->
                    <div style="margin: 5px 30px 10px 30px;">
                        <span>Back to</span>
                        <button mat-button
                                type="button"
                                class="no-hover-effect register"
                                style="margin-left: -5px;"
                                [disableRipple]="true" tabindex="-1"
                                tabIndex="-1"
                                (click)="firstScreenState()">
                            Sign In
                        </button>
                    </div>

                </div>

            </form>

        </div>
    </div>

    <div>

        <h1 mat-dialog-title style="margin-bottom: 11px;font-weight: bold">Sign Out</h1>
        <h1 mat-dialog-title style="margin-bottom: 90px;font-weight: bold">Settings</h1>
        <!--main action-->
        <div style="margin: 20px 30px 15px 30px;">
            <loading-button  (submit)="secondScreenState()">
                LogOut
            </loading-button>
        </div>

    </div>

</div>
